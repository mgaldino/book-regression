# Revisão de R

---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R e Rstudio

O R é uma linguagem de programação voltada para análise de dados. O Rstudio é uma IDE (interface de desenvolvimento), que nos ajuda a programar em R. No curso utilizaremos o Rstudio para facilitar programar em R.

Normalmente, iremos escrever um comando aqui no Script, clicar em executar (run) ou apertar ctrl + enter, e o Rstudio vai copiar o comando, colar no console e executá-los para nós.

## R como calculadora

o R pode funcionar como calculadora.


```{r, results='asis', message=FALSE}
2+2
3*4
10/2
```

## Objetos no R

Tudo no R é um objeto. Isso significa que um número é um objeto.

```{r, results='asis', message=FALSE}
pi
```

Isso significa que funções (comandos) também são objetos

```{r, results='asis', message=FALSE}
sum(c(1,2,3))
sum
```

E nós podemos criar nossos próprios objetos, dando os nomes que quisermos (exceto se já existe um objeto no R com aquele nome, como por exemplo o objeto "sum").

```{r, results='asis', message=FALSE}
x <- 3
y <- 7
x+y
```

## Tipos de objetos

O R tem muitos tipos de objetos. Vamos listar aqui apenas os mais básicos.

### Numeric

Objetos do tipo numeric são ... números ("reais").

```{r, results='asis', message=FALSE}
# Exemplos
pi
1/3
4
```

### character

Objetos do tipo character são do tipo texto. Sempre são escritos entre aspas (simples ou duplas, tanto faz)

```{r, results='asis', message=FALSE}
# Exemplos
"Manoel Galdino"
'abc'
"7"
```

## Armazenando dados

Para armazenar dados, usualmente teremos 4 tipos de objetos: 1. vetor, 2. Matriz. 3. data.frame, 4. lista. Não vou falar de lista agora (nem de array, que é uma generalização da matriz para mais de duas dimensões).

### Vetor
Um vetor é uma sequência de objetos.

```{r, results='asis', message=FALSE}
# Exemplos
c(1,2,3)
1:3
c("Manoel", "Hugo", "Lia", "Juliana", "Jéssica")
c(c(1,2,3), c(2,3,1))
```

os elementos de um vetor devem ser todos do mesmo tipo:
```{r, results='asis', message=FALSE}
# Exemplos
x <- c("1", 1)
x[2]
# sedundo elemento fica armazenado como character

# não é possível somar texto
x[2] + x[2] # erro
```

### Matriz

Uma matriz são vetores organizados por coluna, todas as colunas (vetores) só podem ser de um tipo, ou seja, não posso ter uma coluna numeric e outra de character, por exemplo.

```{r, results='asis', message=FALSE}
# Exemplos
matrix(1:6, nrow=3, ncol=2)
```

### Data Frame
O data.frame é uma tabela/planilha, e é onde normalmente armazenamos nossos bancos de dados no R.


```{r, results='asis', message=FALSE}
# Exemplos
data.frame(x=1:3, y=c("a", "b", "c"))
```


#### datas
```{r, results='asis', message=FALSE}
## explicando data rapidamente
data_ex <- "2020-10-23"
data_ex1 <- as.Date(data_ex)

data_ex1 + 0:9
## fim da explicação rápida de data
```

```{r, results='asis', message=FALSE}
## criando data de forma repetitiva e tediosa. O que queremos evitar!
minha_data <- c(as.Date('2009-01-01'), as.Date('2009-01-02'), as.Date('2009-01-03'),
  as.Date('2009-01-04'), as.Date('2009-01-05'), as.Date('2009-01-06'),
  as.Date('2009-01-07'), as.Date('2009-01-08'), as.Date('2009-01-09'),
  as.Date('2009-01-10'))

acoes <- data_frame(
  tempo = minha_data,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)

print(acoes)

# criando data.frame de maneira mais inteligente
acoes <- data_frame(
  tempo = as.Date('2009-01-01') + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)

print(acoes)
```

 
## Bibliotecas/pacotes

O R permite que a gente importe comandos que não vêm por padrão no R. Em gerla esses comandos es~toa agrupados sob um pacote. PAra usar esses comandos, primeiro a gente instala o pacote, e depois carrega a biblioteca.

```{r}
# Exemplos
#install.packages("data.table")
#library(data.table)
```

## importando dados
Para importar dados, vamos usar a bilioteca "data.table"
Então, instalem ela se ainda não instalaram (usando o comando install.packages("data.table"))
E depois carreguem a biblioteca: library(data.table)

Para importar, usaremos o comando fread do pacote data.table.

```{r}
# vamos carregar base de dados do ibge
# install.packages("devtools")
# devtools::install_github("tbrugz/ribge")

library(ribge)

# para descobrir quais funções existem nesse pacote, podemos usar:
??ribge
```